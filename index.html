<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Styled Time Display</title>
    <link rel="icon" href="./Image assests/Styled Time Display Favicon.png" type="image/png">
    <style>
        *,
        *::before,
        *::after {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            color: #000000;
            overflow: hidden;
            text-align: center;
            box-sizing: border-box;
            font-size-adjust: 0.55;
            background-color: #ffffff;
            transition: background-color 0.5s ease;
            font-family: "Cascadia Mono Nerd Font", "DejaVu Sans Mono", "Consolas", "Menlo", monospace;
        }

        body:hover {
            cursor: none;
        }

        .clock-container {
            width: 100vw;
            height: 100vh;
            padding: 16px;
            display: flex;
            position: absolute;
            align-items: center;
            justify-content: center;
        }

        .clock {
            width: 100%;
            height: 100%;
            display: flex;
            position: relative;
            align-items: center;
            flex-direction: column;
            justify-content: center;
        }

        .time, .binary, .hex, .date {       
            display: flex;
            padding: 1.25rem;
            font-size: 2.25em;
            font-weight: bold;
            text-align: center;
            align-items: center;
            justify-content: center;
            width: calc(100vw - 32px);
            transition: all 0.5s ease;
            height: calc(100vh - 32px);
        }

        .time {
            color: #6F139F;
            background-color: #47B8FF;
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
            cursor: url("./Image assests/Enter-full-screen.png") 12 12, pointer;
        }

        .binary {
            color: #8519BF;
            line-height: 1.2;
            background-color: #3FA5F2;
            cursor: url("./Image assests/Aero-down.png") 12 24, pointer;
        }

        .hex {
            color: #9B1FDE;
            background-color: #3792E5;
            cursor: url("./Image assests/Information.png") 0 0, pointer;
        }

        .date {
            color: #B026FF;
            background-color: #317FD8;
            border-bottom-left-radius: 15px;
            border-bottom-right-radius: 15px;
        }

        .date:hover {
            cursor: none;
        }

        .timezone-selector {
            border: none;
            display: none;
            cursor: pointer;
            color: #8519BF;
            padding: 1.25rem;
            font-size: 1.62em;
            text-align: center;
            width: calc(100vw - 32px);
            background-color: #3FA5F2;
            transition: cursor 0.5s ease;
        }

        .timezone-selector:focus {
            outline: none;
        }

        .author-info {
            border: none;
            display: none;
            color: #9B1FDE;
            padding: 1.25rem;
            overflow-y: auto;
            font-size: 1.62em;
            text-align: center;
            scrollbar-width: none;
            width: calc(100vw - 32px);
            background-color: #3792E5;
            transition: cursor 0.5s ease;
            cursor: url("./Image assests/Information.png") 0 0, pointer;
        }

        .author-info::-webkit-scrollbar {
            display: none;
        }
    </style>
    <script>
        let wakeLock = null;
        let timezoneOffsets = {};

        function updateClock() {
            const timezoneSelector = document.querySelector(".timezone-selector");
            const selectedTimezone = timezoneSelector.value;
            localStorage.setItem("savedTimezone", selectedTimezone);

            const now = new Date();
            const utcTime = now.getTime() + now.getTimezoneOffset() * 60000;
            const offset = timezoneOffsets[selectedTimezone] || 0;
            const adjustedTime = new Date(utcTime + offset * 3600000);

            const hours = adjustedTime.getHours().toString().padStart(2, "0");
            const minutes = adjustedTime.getMinutes().toString().padStart(2, "0");
            const seconds = adjustedTime.getSeconds().toString().padStart(2, "0");
            document.querySelector(".time").textContent = `${hours}:${minutes}:${seconds}`;

            const binaryHours = parseInt(hours, 10).toString(2).padStart(8, "0");
            const binaryMinutes = parseInt(minutes, 10).toString(2).padStart(8, "0");
            const binarySeconds = parseInt(seconds, 10).toString(2).padStart(8, "0");
            document.querySelector(".binary").innerHTML = `${binaryHours}<br>${binaryMinutes}<br>${binarySeconds}`;

            const hexHours = parseInt(hours, 10).toString(16).toUpperCase().padStart(2, "0");
            const hexMinutes = parseInt(minutes, 10).toString(16).toUpperCase().padStart(2, "0");
            const hexSeconds = parseInt(seconds, 10).toString(16).toUpperCase().padStart(2, "0");
            document.querySelector(".hex").textContent = `${hexHours}:${hexMinutes}:${hexSeconds}`;

            const days = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
            const months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
            const day = adjustedTime.getDate();
            let daySuffix;
            if (day >= 11 && day <= 13) {
                daySuffix = "th";
            } else {
                switch (day % 10) {
                    case 1: daySuffix = "st"; break;
                    case 2: daySuffix = "nd"; break;
                    case 3: daySuffix = "rd"; break;
                    default: daySuffix = "th";
                }
            }
            const dateString = `${days[adjustedTime.getDay()]} ${adjustedTime.getFullYear()}<br>${months[adjustedTime.getMonth()]} ${day}${daySuffix}`;
            document.querySelector(".date").innerHTML = dateString;
        }

        function toggleAppearance() {
            const elements = document.querySelectorAll(".time, .binary, .hex, .date");
            if (document.fullscreenElement) {
                document.body.style.backgroundColor = "#000000";
                elements.forEach(element => {
                    element.style.height = "calc(100vh - 32px)"});
            } else {
                document.body.style.backgroundColor = "#ffffff";
                elements.forEach(element => {
                    element.style.height = "calc(100vh - 32px)"});
            }
        }

        async function updateWakeLock() {
            try {
                if (document.fullscreenElement && document.visibilityState === "visible") {
                    if (!wakeLock) {
                        wakeLock = await navigator.wakeLock.request("screen");
                    }
                } else {
                    if (wakeLock) {
                        await wakeLock.release();
                        wakeLock = null;
                    }
                }
            } catch (err) {
                console.error("Wake lock fail:", err);
            }
        }

        function fullscreen() {
            if (!document.fullscreenElement) {
                const docElm = document.documentElement;
                if (docElm.requestFullscreen) {
                    docElm.requestFullscreen();
                } else if (docElm.mozRequestFullScreen) {
                    docElm.mozRequestFullScreen();
                } else if (docElm.webkitRequestFullScreen) {
                    docElm.webkitRequestFullScreen();
                } else if (docElm.msRequestFullscreen) {
                    docElm.msRequestFullscreen();
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.mozCancelFullScreen) {
                    document.mozCancelFullScreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            }
        }

        function fullscreenCursor() {
            const timeElement = document.querySelector(".time");

            if (document.fullscreenElement) {
                timeElement.style.cursor = "url('./Image assests/Exit-full-screen.png') 12 12, pointer";
            } else {
                timeElement.style.cursor = "url('./Image assests/Enter-full-screen.png') 12 12, pointer";
            }
        }

        function timezoneCursor() {
            const timezoneElement = document.querySelector(".timezone-selector");
            const isExpanded = timezoneElement.style.display === "block";
            const binaryElement = document.querySelector(".binary");

            if (isExpanded) {
                binaryElement.style.cursor = "url('./Image assests/Aero-up.png') 12 1, pointer";
            } else {
                binaryElement.style.cursor = "url('./Image assests/Aero-down.png') 12 24, pointer";
            }
        }

        function setupCursorChangeListeners() {
            const binaryElement = document.querySelector(".binary");

            window.addEventListener("resize", fullscreenCursor);
            document.addEventListener("fullscreenchange", fullscreenCursor);
            binaryElement.addEventListener("click", toggleTimezoneSelector);
        }

        function setupElementListeners() {
            const hexElement = document.querySelector(".hex");
            const timeElement = document.querySelector(".time");
            const binaryElement = document.querySelector(".binary");
            const authorElement = document.querySelector(".author-info");

            timeElement.addEventListener("click", fullscreen);
            hexElement.addEventListener("click", toggleAuthorInfo);
            authorElement.addEventListener("click", toggleAuthorInfo);
            binaryElement.addEventListener("click", toggleTimezoneSelector);
        }

        function setupF11Listener() {
            document.addEventListener("keydown", (event) => {
                if (event.key === "F11") {
                    event.preventDefault();
                    fullscreen();
                }
            });
        }

        function toggleTimezoneSelector() {
            const timezoneSelector = document.querySelector(".timezone-selector");
            timezoneSelector.style.display = timezoneSelector.style.display === "none" ? "block" : "none";
            timezoneCursor();
        }

        function toggleAuthorInfo() {
            const authorInfo = document.querySelector(".author-info");
            if (window.getComputedStyle(authorInfo).display === "none") {
                authorInfo.style.display = "block";
            } else {
                authorInfo.style.display = "none";
            }
        }

        function setupResizeListeners() {
            window.addEventListener("resize", toggleAppearance);
            document.addEventListener("visibilitychange", updateWakeLock);
            document.addEventListener("fullscreenchange", updateWakeLock);
            document.addEventListener("fullscreenchange", toggleAppearance);
        }

        document.addEventListener("DOMContentLoaded", async function () {
            const timezoneSelector = document.querySelector(".timezone-selector");
            timezoneSelector.style.display = "none";

            const response = await fetch("https://raw.githubusercontent.com/Parzival1209/Styled-Time-Display/refs/heads/main/Timezone%20lists/timezones.JSON");
            const timezones = await response.json();

            Object.entries(timezones).forEach(([key, value]) => {
                const option = document.createElement("option");
                option.value = key;
                option.textContent = value;
                timezoneSelector.appendChild(option);
            });

            setupCursorChangeListeners();
            setupElementListeners();
            setupResizeListeners();
            setupF11Listener();

            async function loadTimezoneOffsets() {
                const url = "https://raw.githubusercontent.com/Parzival1209/Styled-Time-Display/refs/heads/main/Timezone%20lists/timezoneOffsets.JSON";
                const response = await fetch(url);
                timezoneOffsets = await response.json();
            }
            (async () => {
                await loadTimezoneOffsets();
                const timezoneSelector = document.querySelector(".timezone-selector");
                const savedTimezone = localStorage.getItem("savedTimezone");
                if(savedTimezone) timezoneSelector.value = savedTimezone;
                updateClock();
                setInterval(updateClock, 1000);
                updateClock();
            })();
        });
    </script>
</head>
<body>
    <div class="clock-container">
        <div class="clock">
            <div class="time">01:23:45</div>
            <div class="binary">
                00000001<br>
                00010111<br>
                00101101
            </div>
            <select class="timezone-selector"></select>
            <div class="hex">01:17:2D</div>
            <div class="author-info">
                Authors: ChatGPT and Kai Yaron<br>
                Code: Code converted from Python to HTML<br>
                HTML Code: 60% ChatGPT and 40% Kai Yaron<br>
                Python Code: 10% ChatGPT and 90% Kai Yaron
            </div>
            <div class="date">Mon 2025<br>Jan 1st</div>
        </div>
    </div>
</body>
</html>

